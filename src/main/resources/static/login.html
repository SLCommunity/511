<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"
          name="viewport">
    <meta content="ie=edge" http-equiv="X-UA-Compatible">
    <link href="https://fonts.gstatic.com" rel="preconnect">
    <link href="https://fonts.googleapis.com/css2?family=Nanum+Gothic&display=swap" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <meta charset="UTF-8">
    <title>로그인 페이지</title>
    <link rel="stylesheet" type="text/css" href="/css/login.css">

    <script>
        function login() {
            let info = {
                username: $("#user").val(),
                password: $("#pass").val()
            }

            $.ajax({
                type: 'POST',
                url: `/sign-in`,
                contentType: "application/json",
                data: JSON.stringify(info),
                success: function (response) {
                    localStorage.setItem("token", response['token']);
                    localStorage.setItem("username", response['username']);
                    location.href = '/index.html';
                },
                error: function (response) {
                    alert("로그인이 불가합니다." + response.responseJSON.error)
                },
            })
        }

        function register(){
            let info = {
                username: $("#userID").val(),
                password: $("#password").val(),
                name : $("#name").val(),
                blog : $("#blog").val(),
                github : $("#github").val(),
                turn : $("#turn").val()
            }

            $.ajax({
                type: 'POST',
                url: `/signup`,
                contentType: "application/json",
                data: JSON.stringify(info),
                success: function (response) {
                    location.href = '/login.html';
                },
                error: function (response) {
                    alert("회원가입이 불가합니다." + response.responseJSON.error)
                },
            })
        }
    </script>
</head>
<body>

<!--<div id="login-form">-->
<!--    <div id="login-title">Log into Select Shop</div>-->
<!--    <button id="login-kakao-btn"-->
<!--            onclick="location.href='https://kauth.kakao.com/oauth/authorize?client_id=e81c288c3e5afca68f122b4db3bc314f&redirect_uri=http://localhost:8080/user/kakao/callback&response_type=code'">-->
<!--        카카오로 로그인하기-->
<!--    </button>-->
<!--    <button id="login-id-btn" onclick="location.href='/user/signup'">-->
<!--        회원 가입하기-->
<!--    </button>-->
<!--    <div class="alert alert-danger" role="alert" th:if="${loginError}">로그인에 실패하였습니다.</div>-->
<!--    <form action="/user/login" method="post">-->
<!--        <div class="login-id-label">아이디</div>-->
<!--        <input class="login-input-box" name="username" type="text">-->

<!--        <div class="login-id-label">비밀번호</div>-->
<!--        <input class="login-input-box" name="password" type="password">-->


<!--        <button id="login-id-submit">로그인</button>-->
<!--    </form>-->
<!--    -->
<!--</div>-->


<div class="login-wrap">
    <div class="login-html">
        <input id="tab-1" type="radio" name="tab" class="sign-in" checked><label for="tab-1" class="tab">Sign In</label>
        <input id="tab-2" type="radio" name="tab" class="sign-up"><label for="tab-2" class="tab">Sign Up</label>
        <div class="login-form">

            <!--                <form action="signin" method="post">-->
            <div class="sign-in-htm">
                <div class="group">
                    <label for="user" class="label">UserID</label>
                    <input id="user" name="username" type="text" class="input">
                </div>
                <div class="group">
                    <label for="pass" class="label">Password</label>
                    <input id="pass" name="password" type="password" class="input" data-type="password">
                </div>
                <div class="group">
                    <input id="check" type="checkbox" class="check" checked>
                    <label for="check"><span class="icon"></span> Keep me Signed in</label>
                </div>
                <div class="group">
                    <input type="submit" class="button" value="Sign In" onclick="login()">
                </div>

                <div class="hr"></div>
                <!--                        <div class="foot-lnk">-->
                <!--                            <a id="login-kakao-btn"-->
                <!--                               onclick="location.href='https://kauth.kakao.com/oauth/authorize?client_id=e81c288c3e5afca68f122b4db3bc314f&redirect_uri=http://localhost:8080/user/kakao/callback&response_type=code'">-->
                <!--                                카카오로 로그인하기-->
                <!--                            </a>-->
                <!--                        </div>-->
            </div>
            <!--                </form>-->

<!--            <form action="/user/signup" method="post">-->
                <div class="sign-up-htm">
                    <div class="group">
                        <label for="user" class="label">ID</label>
                        <input id="userID" name="username" type="text" class="input">
                    </div>

                    <div class="group">
                        <label for="pass" class="label">Password</label>
                        <input id="password" name="password" type="password" class="input" data-type="password">
                    </div>

                    <div class="group">
                        <label for="pass" class="label">Name</label>
                        <input id="name" name="name" type="text" class="input">
                    </div>
                    <div class="group">
                        <label for="pass" class="label">Blog Link</label>
                        <input id="blog" name="blog" type="text" class="input">
                    </div>
                    <div class="group">
                        <label for="pass" class="label">Github Link</label>
                        <input id="github" name="github" type="text" class="input">
                    </div>
                    <div class="group">
                        <label for="turn" class="label">기수</label>
                        <select id="turn" name="turn">
                            <option value="1">1</option>
                            <option value="1">2</option>
                            <option value="1">3</option>
                        </select>
                    </div>


                    <div class="group">
                        <input id="login-id-submit" type="submit" onclick="register()" class="button" value="Sign Up">
                    </div>
                    <div class="hr"></div>
                </div>
        </div>
<!--        </form>-->

    </div>
</div>

</body>
</html>